"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[595],{595:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var l=t(791),a=t(294),n=t(184);const r=e=>{let{width:s}=e;return(0,n.jsxs)("svg",{width:s,viewBox:"0 0 24 24",id:"upload",children:[(0,n.jsx)("path",{d:"M5 10c-.6 0-1-.4-1-1 0-3.9 3.1-7 7-7 3 0 5.7 2 6.7 4.9.1.5-.1 1.1-.7 1.2-.5.2-1.1-.1-1.3-.6C15.1 5.4 13.2 4 11 4 8.2 4 6 6.2 6 9c0 .6-.4 1-1 1z"}),(0,n.jsx)("path",{d:"M18 18c-.6 0-1-.4-1-1s.4-1 1-1c2.2 0 4-1.8 4-4s-1.8-4-4-4c-.3 0-.7 0-1 .1-.5.1-1.1-.2-1.2-.7s.2-1.1.7-1.2c.5-.1 1-.2 1.5-.2 3.3 0 6 2.7 6 6s-2.7 6-6 6zM8 18H5c-.6 0-1-.4-1-1s.4-1 1-1h3c.6 0 1 .4 1 1s-.4 1-1 1z"}),(0,n.jsx)("path",{d:"M18 18h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM5 18c-2.8 0-5-2.2-5-5s2.2-5 5-5c.6 0 1 .4 1 1s-.4 1-1 1c-1.7 0-3 1.3-3 3s1.3 3 3 3c.6 0 1 .4 1 1s-.4 1-1 1zm7 4c-.6 0-1-.4-1-1V11c0-.6.4-1 1-1s1 .4 1 1v10c0 .6-.4 1-1 1z"}),(0,n.jsx)("path",{d:"M9 15c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l3-3c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-3 3c-.2.2-.4.3-.7.3z"}),(0,n.jsx)("path",{d:"M15 15c-.3 0-.5-.1-.7-.3l-3-3c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l3 3c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3z"})]})},i=e=>{let{setFile:s}=e;const t=(0,l.useRef)(null),a=(0,l.useRef)(null),[i,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(null);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"img-Uploader bg-[#e9e9e9]  w-[23rem] max-sm:w-auto ".concat(o&&i?"h-[".concat(o,"]"):"h-[27rem] max-sm:h-[22rem]","  rounded-3xl border-dashed border-[#dadada]  hover:border-[#929292] border-2 cursor-pointer overflow-hidden relative"),onClick:()=>{t.current.click()},onDrop:e=>{e.preventDefault();const t=e.dataTransfer.files[0];t.type.startsWith("image/")?(s(t),c(t),console.log("drop",t)):(s(null),c(null),console.log("dropped file is not image"))},onDragOver:e=>{e.preventDefault(),console.log("dragover")},children:[(0,n.jsx)("div",{className:"flex items-center flex-col justify-center h-full pointer-events-none ",children:i?(0,n.jsx)("img",{className:" w-full ",ref:a,src:URL.createObjectURL(i),alt:"upload-img-preview",onLoad:()=>{const e=a.current.offsetHeight;d(e)}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{width:25}),(0,n.jsx)("h3",{className:"pointer-events-none text-center break-words  max-w-[220px]",children:"Choose a file or drag and drop it here"})]})}),i&&(0,n.jsxs)("div",{className:"flex justify-center items-center flex-col w-full h-full z-20 bg-[#ffffff8f] absolute opacity-0  hover:opacity-100 top-0",children:[(0,n.jsx)(r,{width:25}),(0,n.jsx)("h3",{className:"pointer-events-none text-center break-words  max-w-[220px] font-medium",children:"Choose Another"})]}),(0,n.jsx)("input",{type:"file",accept:"image/*",name:"upload_file",onChange:e=>{c(e.target.files[0]),s(e.target.files[0])},hidden:!0,ref:t,multiple:!1})]})})},c=e=>{let{height:s}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("svg",{height:s,viewBox:"0 0 32 32",id:"error",children:(0,n.jsx)("path",{d:"M16 32c8.836 0 16-7.164 16-16S24.836 0 16 0 0 7.164 0 16s7.164 16 16 16zm2-14a2 2 0 0 1-4 0V8a2 2 0 0 1 4 0v10zm-2 3.968a2 2 0 1 1-.001 4.001A2 2 0 0 1 16 21.968z",fill:"#d93025"})})})};var o=t(689),d=t(608),m=t(402);const p=()=>{const[e,s]=(0,l.useState)(null),[t,r]=(0,l.useState)({pinTitle:"",pinDescription:""}),[p,x]=(0,l.useState)(),u=(0,o.s0)(),[h,f]=(0,l.useState)(!1),g=(0,l.useRef)(),v=e=>{const{name:s,value:t}=e.target;r((e=>({...e,[s]:t})))},j=e=>{e.preventDefault()};return(0,l.useEffect)((()=>{console.log(h)}),[h]),(0,n.jsx)("div",{className:"w-full bg-slate-50  create-wrapper minus-nav-100vh flex flex-col",ref:g,onDrop:j,onDragOver:j,children:(0,n.jsx)("div",{className:"pin-creator bg-white  rounded-2xl  mx-auto max-sm:mx-0 mt-12 max-sm:mt-0 max-sm:w-full max-sm:h-auto pb-20 max-sm:flex max-sm:flex-col max-sm:rounded-none",children:(0,n.jsxs)("div",{className:"pin-form  m-12 max-sm:m-5 flex gap-10 max-sm:gap-5 max-sm:flex-col ",children:[(0,n.jsx)("div",{className:"upload-field",children:(0,n.jsx)(i,{setFile:e=>s(e)})}),(0,n.jsxs)("div",{className:"pin-detls-inputs mt-1 w-[36rem] max-sm:w-auto gap-6 flex flex-col max-sm:gap-3",children:[(0,n.jsx)(d.Z,{name:"pinTitle",id:"pinTitle",handleChange:v,label:"Title"}),(0,n.jsxs)("label",{htmlFor:"pinDesc",className:"flex flex-col text-[#111111] text-sm gap-2",children:["Description",(0,n.jsx)("textarea",{type:"text",name:"pinDescription",id:"pinDesc",rows:6,className:"border-2 border-[#cdcdcd] text-base px-4 py-2 rounded-xl resize-none ",onChange:v})]}),(0,n.jsx)("div",{className:"pin-prime-btn flex",children:(0,n.jsx)("button",{disabled:h,onClick:async()=>{try{if(f(!0),!e)return void x("Please select a file.");if(!t.pinTitle||!t.pinDescription)return void x("Title and Description are required.");const s=new FormData;s.append("upload_file",e),s.append("pinTitle",t.pinTitle),s.append("pinDescription",t.pinDescription);const l=await a.Z.post("image/upload",s);200===l.status?(console.log(l.data.message),m.ZP.success("post created successfully"),u("/")):(m.ZP.error("post creation failed: please check your connection"),console.log(l.data.message))}catch(s){m.ZP.error("Oops! Something went wrong."),console.log("Failed to upload",s)}finally{f(!1)}},children:"Publish"})}),p&&(0,n.jsxs)("div",{className:"text-[#d93025] text-sm flex items-center gap-2 mx-1",children:[(0,n.jsx)(c,{height:15})," ",p]})]})]})})})}}}]);
//# sourceMappingURL=595.6ffec43a.chunk.js.map